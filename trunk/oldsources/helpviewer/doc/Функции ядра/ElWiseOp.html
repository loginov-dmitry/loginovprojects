<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> Main functions:  ElWiseOp</TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="Логинов Д.С.">
<META NAME="Keywords" CONTENT="Matrix, ElWiseOp">
<META NAME="Description" CONTENT="Описание функции">
</HEAD>

<BODY>
<font size='+1' style="font-family: courier new;">
<table width="100%"><tr><td valign=baseline bgcolor="#ffe4b0"><b>Main functions</b></td></tr><table> 
<HR>

<H1><FONT COLOR="#CC3300">ElWiseOp</FONT></H1>
Выполнение поэлементных операций<BR>

<H2><FONT COLOR="#CC3300">Объявление функции</FONT></H2>

<b>&nbsp;&nbsp;
1. function TWorkspace.ElWiseOp(SourAr1, SourAr2, DestAr: String;
  Operation: Char): String;<BR>&nbsp;&nbsp;
2. function TWorkspace.ElWiseOp(SourAr1, SourAr2, DestAr: String;
  Func: TRealFunc2): String;<BR>&nbsp;&nbsp;
3. function TWorkspace.ElWiseOp(SourAr1, SourAr2, DestAr: String;
  Func: TExtendFunc2): String;
</b><BR>

<H2><FONT COLOR="#CC3300">Назначение</FONT></H2>

1. Функция выполняет одну из операций <b>['+','-','*','/','^']</B> над элементами массивов <B>SourAr1</B> и <B>SourAr2</B>. Формирует выходной массив <B>DestAr</B>. Вид операции задается с помощью аргумента <B>Operation</B>. Выполнение поэлементных операций с помощью этой функции по скорости не уступает работе с обычными массивами. Функция поддерживает работу с "константными" массивами, т.е. вместо имени любого входного массива вы можете задать его элементы, например: '[1 2 3; 4 5 6]'. Однако следует иметь ввиду, что такой способ задания массивов в цикле может привести к ощутимому снижению скорости. Функция сможет выполнить поэлементную операцию лишь в случае, если оба входных массива имеют одинаковые размеры, либо один из входных массивов является единичным, т.е. состоит из одного элемента. Функция возвращает имя выходного массива.<BR><BR>

2. Данная функция выполняет поэлементные операции с применением дополнительной функции <b>Func: TRealFunc2</B>. Дело в том, что кроме стандартных поэлементных операций <b>['+','-','*','/','^']</B> существуют функции двух переменных <b>Y=F(X1, X2)</B>. Именно функции двух переменных и программируются в дополнительной функции <B>Func</B>. В данном случае в качестве последнего аргумента передается не тип операции, а ссылка на функцию двух переменных. Тип <B>TRealFunc2</B> описывается следующим образом:<BR>
<b>
TRealFunc2 = function(const Value1, Value2: Real): Real;</b><BR>
Рассмотрим на примере процесс программирования с использованием функции двух аргументов. Пусть эта функция будет расчитывать формулу <b>Y=(X1 + 2 x X2)/3</B>, тогда она будет выглядеть следующим образом:<BR>
<b>
function MyFunc(const X1, X2: Real): Real;<BR>
begin<BR>
&nbsp;&nbsp;Result := (X1 + 2*X2)/3;<BR>
end;
</b><BR>
Допустим, у нас есть два массива A=[1 2 3] и B=[4 5 6] и нам нужно сформировать массив С с применением функции MyFunc. Код будет выглядеть следующим образом:<BR>
<b>
&nbsp;&nbsp;Base.ElWiseOp('A', 'B', 'C', MyFunc);
</b><BR>
В результате получим массив С=[3 4 5].<BR>
Данный способ работает очень быстро, поэтому рекомендую его использовать где только можно. Функция поддерживает "константный" ввод массивов<BR><BR>

3. Функция аналогична предыдущей, однако использует не Real, а Extended. Этот тип введен по той причине, что в модуле Math существуют функции двух аргументов, работающие только с типом Extended.


<H2><FONT COLOR="#CC3300">Примеры</FONT></H2>

1а. Имеются массивы A=[1 2 3] и B=[4 5 6]. Нам нужно их поэлементно перемножить, а результат поместить в массив А:<BR>
<b>
&nbsp;&nbsp;Base.ElWiseOp('A', 'B', 'A', '*');
</b><BR>
1б. Имеются массивы A=[5] и B=[1 2 3; 4 5 6]. Нам нужно их поэлементно сложить, а результат поместить в массив С:<BR>
<b>
&nbsp;&nbsp;Base.ElWiseOp('A', 'B', 'С', '+');
</b><BR>
</BODY>
</HTML>
